<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:RoomScout.ViewModels.AdminSide"
             x:Class="RoomScout.Views.AdminSide.BookingRequestsPage"
             Shell.NavBarIsVisible="True"
             Title="Booking Requests"
             BackgroundColor="#1A1F25">

    <ContentPage.BindingContext>
        <local:BookingRequestsViewModel />
    </ContentPage.BindingContext>

    <CollectionView ItemsSource="{Binding BookingRequests}" SelectionMode="None">
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <VerticalStackLayout Spacing="10" Padding="10">
                    <!-- Main Booking Request Frame -->
                    <Frame BackgroundColor="White" CornerRadius="10" HasShadow="True">
                        <VerticalStackLayout Spacing="10">
                            <!-- Profile Picture and Name -->
                            <HorizontalStackLayout Spacing="10">
                                <Image Source="{Binding ProfilePicture}"
                                       WidthRequest="50"
                                       HeightRequest="50"
                                       Aspect="AspectFill"
                                       Clip="Ellipse" />

                                <Label Text="{Binding Name}"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center" />
                            </HorizontalStackLayout>

                            <Label Text="{Binding ConfirmationMessage}"
                                   FontSize="16"
                                   FontAttributes="Italic"
                                   TextColor="Green"
                                   IsVisible="{Binding ConfirmationMessage, Converter={StaticResource StringNotEmptyConverter}}" />


                            <!-- Buttons -->
                            <HorizontalStackLayout Spacing="10">
                                <Button Text="Accept"
                                        BackgroundColor="Green"
                                        TextColor="White"
                                        Clicked="OnAcceptButtonClicked"
                                        CommandParameter="{Binding}" />

                                <Button Text="Remove"
                                        BackgroundColor="Red"
                                        TextColor="White"
                                        Clicked="OnRemoveButtonClicked"
                                        CommandParameter="{Binding}" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Date and Time Frame -->
                    <Frame BackgroundColor="LightGray"
                           CornerRadius="10"
                           HasShadow="True"
                           Padding="10"
                           IsVisible="{Binding IsDateTimeVisible}">
                        <VerticalStackLayout Spacing="10">
                            <Label Text="Date:" />
                            <Entry Text="{Binding Date}" />
                            <Label Text="Time"/>
                            <Entry Text="{Binding Time}" />
                            <Button Text="Save"
                                    BackgroundColor="Blue"
                                    TextColor="White"
                                    Clicked="OnSaveButtonClicked"
                                    CommandParameter="{Binding}" />
                        </VerticalStackLayout>
                    </Frame>
                </VerticalStackLayout>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>

</ContentPage>
